<nav class="bg-black text-white shadow-lg">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <!-- Logo and brand -->
            <div class="flex items-center">
                <a routerLink="/" class="flex items-center">
                    <span class="text-xl font-bold">Lubri<span class="text-yellow-500">Pro</span></span>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-4">
                <a routerLink="/home" routerLinkActive="text-yellow-500" [routerLinkActiveOptions]="{exact: true}" class="px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                    Home
                </a>
                <a routerLink="/products" routerLinkActive="text-yellow-500" class="px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                    Products
                </a>
                <a routerLink="/about" routerLinkActive="text-yellow-500" class="px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                    About
                </a>
                <a routerLink="/contact" routerLinkActive="text-yellow-500" class="px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                    Contact
                </a>

                <!-- Auth Navigation -->
                <ng-container *ngIf="!(isAuthenticated$ | async); else userMenu">
                    <a routerLink="/auth/login" routerLinkActive="text-yellow-500" class="px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                        Login
                    </a>
                    <a routerLink="/auth/register" class="bg-yellow-500 text-black px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-600 transition-colors">
                        Register
                    </a>
                </ng-container>
            </div>

            <!-- User Menu (Desktop) -->
            <ng-template #userMenu>
                <div class="hidden md:flex items-center">
                    <div class="relative">
                        <button (click)="toggleUserMenu()" class="flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:text-yellow-500 transition-colors">
                            <span>{{ (currentUser$ | async)?.email }}</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <!-- Dropdown Menu -->
                        <div *ngIf="userMenuOpen" class="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-black ring-1 ring-black ring-opacity-5">
                            <div class="py-1">
                                <a [routerLink]="['/dashboard']" class="block px-4 py-2 text-sm hover:bg-gray-800 hover:text-yellow-500">
                                    Dashboard
                                </a>
                                <a [routerLink]="['/profile']" class="block px-4 py-2 text-sm hover:bg-gray-800 hover:text-yellow-500">
                                    Profile
                                </a>
                                <button (click)="logout()" class="w-full text-left px-4 py-2 text-sm hover:bg-gray-800 hover:text-yellow-500">
                                    Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>

            <!-- Mobile menu button -->
            <div class="flex items-center md:hidden">
                <button aria-label="button" (click)="toggleMobileMenu()" class="inline-flex items-center justify-center p-2 rounded-md text-white hover:text-yellow-500 focus:outline-none">
                    <svg *ngIf="!mobileMenuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <svg *ngIf="mobileMenuOpen" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div [class.hidden]="!mobileMenuOpen" class="md:hidden bg-black">
        <div class="px-2 pt-2 pb-3 space-y-1">
            <a routerLink="/home" routerLinkActive="text-yellow-500" [routerLinkActiveOptions]="{exact: true}" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                Home
            </a>
            <a routerLink="/products" routerLinkActive="text-yellow-500" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                Products
            </a>
            <a routerLink="/about" routerLinkActive="text-yellow-500" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                About
            </a>
            <a routerLink="/contact" routerLinkActive="text-yellow-500" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                Contact
            </a>

            <!-- Mobile Auth Navigation -->
            <ng-container *ngIf="!(isAuthenticated$ | async)">
                <a routerLink="/auth/login" routerLinkActive="text-yellow-500" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                    Login
                </a>
                <a routerLink="/auth/register" class="block px-3 py-2 rounded-md text-base font-medium bg-yellow-500 text-black hover:bg-yellow-600 transition-colors" (click)="toggleMobileMenu()">
                    Register
                </a>
            </ng-container>

            <!-- Mobile User Menu -->
            <ng-container *ngIf="isAuthenticated$ | async">
                <a [routerLink]="['/dashboard']" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                    Dashboard
                </a>
                <a [routerLink]="['/profile']" class="block px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors" (click)="toggleMobileMenu()">
                    Profile
                </a>
                <button (click)="logout(); toggleMobileMenu()" class="w-full text-left px-3 py-2 rounded-md text-base font-medium hover:text-yellow-500 transition-colors">
                    Logout
                </button>
            </ng-container>
        </div>
    </div>
</nav>